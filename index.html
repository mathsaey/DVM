<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>DVM: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">DVM
   &#160;<span id="projectnumber">747aacc</span>
   </div>
   <div id="projectbrief">DataFlow Virtual Machine</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">DVM Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#Introduction">Introduction</a></li>
<li class="level1"><a href="#About">About DVM</a><ul><li class="level2"><a href="#Dataflow">Dataflow</a></li>
<li class="level2"><a href="#IF1">Sisal and IF1</a></li>
<li class="level2"><a href="#General">In General</a></li>
</ul>
</li>
<li class="level1"><a href="#Start">Getting started</a><ul><li class="level2"><a href="#Performance">On Python and speed</a></li>
</ul>
</li>
<li class="level1"><a href="#Structure">Overall Structure</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="Introduction"></a>
Introduction</h1>
<p>This is the main documentation of DVM, the Dataflow Virtual Machine, created by Mathijs Saey for his thesis at the VUB.</p>
<p>These pages serve a number of purposes:</p>
<ul>
<li><a href="#About">Provide a basic overview about DVM.</a></li>
<li><a href="#Structure">Provide a high-level overview of the code base.</a></li>
<li><a href="files.html">Collect the documentation about the DVM code base</a></li>
<li><a href="#Start">Collect all the necessary information to get DVM up and running</a></li>
<li><a href="pages.html">Collect references and examples that can come in handy while working on DVM.</a></li>
</ul>
<p>It should be noted that the version string next to the project name in the header of any page of this documentation corresponds to a commit hash. This hash can be used to find the exact codebase that was used to generate the docs.</p>
<p>Finally, the main repository of this project can be found <a href="https://github.com/mathsaey/DVM">on github</a>.</p>
<h1><a class="anchor" id="About"></a>
About DVM</h1>
<p>The goal of DVM is to create a highly parallel virtual machine. This machine will use the <a href="http://en.wikipedia.org/wiki/Dataflow_architecture">dataflow architecture</a> to achieve a high amount of concurrency.</p>
<h2><a class="anchor" id="Dataflow"></a>
Dataflow</h2>
<div class="image">
<img src="../res/simpleStatic.png"  style="float: right"/>
</div>
 <div class="image">
<img src="../res/simpleStatic.png"  alt="Caption text"/>
</div>
<p>In short, the general idea behind <a href="http://en.wikipedia.org/wiki/Dataflow_architecture">dataflow</a> is that an instruction in the program is executed once it's inputs are ready. This property allows us to exploit the implicit parallelism of programs.</p>
<p>There are 2 general flavors of dataflow, static and dynamic. In static dataflow, the program is represented as a graph, and data travels along the edges of this graph. Each node of the graph represents an operation on this data.</p>
<p>A visual representation of such a dataflow graph can be seen right of this section. This graph was generated from the following Sisal code.</p>
<div class="fragment"><div class="line"><span class="keyword">function</span> main(a, b, c, d : integer returns integer)</div>
<div class="line">    let </div>
<div class="line">        ab := a + b;</div>
<div class="line">        cd := c + d</div>
<div class="line">    in </div>
<div class="line">        ab + cd </div>
<div class="line">    end let</div>
<div class="line">end <span class="keyword">function</span></div>
</div><!-- fragment --><p>As we can see, this program simply takes 4 inputs, and adds all of these together. The generated dataflow graph shows us that both of the additions could be carried out in parallel.</p>
<p>The second flavor, dynamic dataflow, is a less intuitive representation, which is better suited to parallel execution. Dynamic dataflow is the model of dataflow that is generally used in practice. This is because static dataflow is very poor at running the same piece of code without internally copying it.</p>
<p>In dynamic dataflow, the program is not represented as a graph, instead, the program is represented as a set of instructions kept in the instruction memory. Providing these instructions with data is done through using tagged tokens.</p>
<p>These tokens consists of 2 pieces, a datum and a tag. The datum is simply the piece of data that we want to transport to some instruction, while the tag contains all the information that the program needs to get this token to it's destination. Furthermore, this tag contains some additional information that allows us to have multiple invocations of the same piece of code without causing concurrency issues.</p>
<p>Executing the program is now done by sending these tagged tokens to their destinations. These destination instructions will in turn return new tokens, which can be added to the program again, continuing the cycle until we reach the end of our program.</p>
<p>The exact details of a dynamic dataflow architecture are not presented here for the sake of brevity, people looking for a more detailed explanation should consider reading: <code>Executing a Program on the MIT Tagged-Token Dataflow Architecture</code> (Arvind and RISHIYUR R.S., 1990).</p>
<h2><a class="anchor" id="IF1"></a>
Sisal and IF1</h2>
<p><a href="http://en.wikipedia.org/wiki/SISAL">Sisal</a> is a language designed to be a high level variant for languages such as PASCAL that can work on multicore machines. During the first compilation phase sisalc (the sisal compiler) compiles Sisal to IF1, an intermediate language, which represents the sisal source code as a dataflow graph.</p>
<p>The focus of DVM lies on the optimization and execution of dataflow programs, and not on the language or compiler design. For this reason, we decided to use IF1 as the primary input language of DVM. Using DVM in combination with <a href="http://sourceforge.net/projects/sisal/">sisalc</a> offers us a good language for writing dataflow program, along with a compiler that removes the complexity of the language for us.</p>
<p>More information about IF1 along with some sisal and IF1 code samples can be found in the <a href="md_doc__i_f1.html">IF1 overview</a>.</p>
<h2><a class="anchor" id="General"></a>
In General</h2>
<p>To recap, DVM is a virtual machine that attempts to achieve high levels of parallelism. In order to do this, DVM utilizes a dynamic dataflow architecture. DVM uses IF1 as an input language, as generated by sisalc, the Sisal compiler.</p>
<h1><a class="anchor" id="Start"></a>
Getting started</h1>
<p>Running DVM is quite trivial at the moment. All you need is a working <a href="http://www.python.org/">python</a> interpreter. We recommend using <a href="http://pypy.org/">pypy</a> if you want to benchmark DVM or test it for speed. However, wherever possible, compatibility is maintained with CPython, the default python interpreter.</p>
<p>You need to install <a href="http://sourceforge.net/projects/sisal/">sisalc</a>, the sisal C compiler if you want to produce your own IF1 files from sisal source code.</p>
<p>For the time being, input files are manually added in the source code. A decent way to invoke DVM from the command line is planned for the future.</p>
<p>The sites of all these tools and the used versions can be found below:</p>
<table class="doxtable">
<tr>
<th>Command </th><th>Version </th><th>Website  </th></tr>
<tr>
<td><code>sisalc</code> </td><td>14.1.0 </td><td><a href="http://sourceforge.net/projects/sisal/">http://sourceforge.net/projects/sisal/</a> </td></tr>
<tr>
<td><code>python</code> </td><td>2.7.6 </td><td><a href="http://www.python.org/">http://www.python.org/</a> </td></tr>
<tr>
<td><code>pypy</code> </td><td>2.2.1 </td><td><a href="http://pypy.org/">http://pypy.org/</a> </td></tr>
</table>
<h2><a class="anchor" id="Performance"></a>
On Python and speed</h2>
<p>Running a virtual machine on an interpreted language seems like a pretty bad idea. Python performance is pretty slow, even with the speedup that using pypy nets us. So why did we opt to use python instead of going for a fast language, such as C++?</p>
<p>The use of python can be explained by a number of reasons. First of all, using python significantly speeds up development time, which is important in a project with a limited amount of time. Secondly, rapid prototyping and testing multiple approaches to a single problem is quite important due to the academic nature of our work. Initially, we only wanted to use python for a prototyping stage, but time constraints led us to using python as our primary language. A <a href="https://github.com/mathsaey/DVM/tree/DVM%2B%2B">C++ version</a> of DVM is in the works, but no progress should be expected anytime soon, or even at all.</p>
<h1><a class="anchor" id="Structure"></a>
Overall Structure</h1>
<p>DVM is split up into a few components:</p>
<ul>
<li><a class="el" href="namespaceif1parser.html">The IF1 Parser</a></li>
<li><a class="el" href="namespace_i_g_r.html" title="DVM Intermediate Graph Representation. ">IGR</a>, the Intermediate Graph Representation</li>
<li>The <a class="el" href="namespacecompiler.html" title="IGR Compiler. ">compiler</a>, which transforms <a class="el" href="namespace_i_g_r.html" title="DVM Intermediate Graph Representation. ">IGR</a> and converts it to work with the runtime</li>
<li>DVM, the actual execution engine.</li>
</ul>
<p>The first 3 components of this list are dependent on one another, and on DVM. DVM itself however, is not dependent on any of the other modules. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Feb 23 2014 15:11:55 for DVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
